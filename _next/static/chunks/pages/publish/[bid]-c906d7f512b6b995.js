(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[586],{2514:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/publish/[bid]",function(){return t(7267)}])},9157:function(e,i){"use strict";i.Z={src:"/react-joara-front/_next/static/media/preview.ceb96345.jpg",height:465,width:300,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgABQMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAAArAK//8QAGxAAAgEFAAAAAAAAAAAAAAAAAQIAAyEjMUH/2gAIAQEAAT8AWo98ej0z/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPwB//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwB//9k=",blurWidth:5,blurHeight:8}},6742:function(e,i,t){"use strict";t.d(i,{E:function(){return s},J:function(){return o}});let s=[{url:"/img/img.png",alt:"이미지01",bannerId:1,job:"백엔드",name:"이현종"},{url:"/img/mentalout1.gif",alt:"이미지02",bannerId:2,job:"데이터분석,백엔드",name:"박승인"},{url:"/img/mentalout2.gif",alt:"이미지03",bannerId:3,job:"백엔드",name:"오승재"},{url:"/img/말대꾸.png",alt:"이미지04",bannerId:4,job:"",name:"노기훈(팀장)"}],o={dummy_short:"Lorem ipsum dolor sit amet consectetur adipisicing elit",dummy_long:"Lorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit"}},9691:function(e,i,t){"use strict";var s=t(7848),o=t(8742),r=t(609),l=t(6991);let{API_BOOK:c}=r.Z,a=async e=>{let{data:i}=await o._i.get("".concat(c,"/").concat(e));return i},n=e=>(0,s.a)({queryKey:[l.y_,e],queryFn:()=>a(e)});i.Z=n},7267:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return k}});var s=t(5893),o=t(8993),r=t(7294),l=t(6742),c=t(5675),a=t.n(c),n=t(7536),m=t(155),d=t(7684),u=t(1163),p=t(9157),g=t(9691),A=t(6991),L=t(609),x=t(7935),f=t(8742),h=t(5945),b=t(8228);let{API_BOOK_UPDATE:w}=L.Z,{BOOK:j}=x.Z,v=e=>f._i.put(w,e).then(i=>{let{data:t}=i;t.success?(alert("책이 성공적으로 수정되었습니다."),window.location.href="".concat(j,"/").concat(e.bookId)):alert("수정에 실패했습니다. ")}).catch(console.error),y=()=>{let e=(0,h.NL)();return(0,b.D)(v,{onError:e=>alert(e),onSuccess:()=>{e.invalidateQueries([A.Hx]),e.invalidateQueries([A.Ej]),e.invalidateQueries([A.RL]),e.invalidateQueries([A.hY]),e.invalidateQueries([A.y_])}})},{API_BOOK_DELETE:N}=L.Z,E=async e=>{let{data:i}=await f._i.delete("".concat(N,"/").concat(e));return i},Q=()=>{let e=(0,h.NL)();return(0,b.D)(E,{onError:e=>alert(e),onSuccess:()=>{e.invalidateQueries([A.Hx]),e.invalidateQueries([A.Ej]),e.invalidateQueries([A.RL]),e.invalidateQueries([A.hY]),e.invalidateQueries([A.y_])}})},I=()=>{var e;let{register:i,handleSubmit:t,watch:o,formState:{isSubmitting:c,errors:A}}=(0,n.cI)({mode:"onChange"}),L=(0,u.useRouter)(),f=L.query,{HOME:h}=x.Z,[b,w]=(0,r.useState)(""),[j,v]=(0,r.useState)([]),[N,E]=(0,r.useState)([]),I="coverImages",_=o(I),k=y(),{mutate:B}=Q(),C=e=>{e.preventDefault(),f.bid&&B(Number(f.bid),{onSuccess:()=>{L.push(h)},onError:e=>{alert(e)}})};(0,r.useEffect)(()=>{_&&_.length>0&&w(URL.createObjectURL(_[0]))},[_]);let{data:{genres:S}={}}=(0,d.Z)(),{data:{book:Z}={}}=(0,g.Z)(Number(f.bid));return(0,r.useEffect)(()=>{let e=null==S?void 0:S.filter(e=>{let{kor:i}=e;return j.includes(null!=i?i:"")}),i=null==e?void 0:e.map(e=>{let{id:i}=e;if(null==i)throw Error("Some genre has no id.");return i});E(i)},[j,S]),(0,r.useEffect)(()=>{var e;v(null!==(e=null==Z?void 0:Z.genreNameList)&&void 0!==e?e:[])},[Z]),(0,s.jsxs)("form",{className:"flex flex-col w-full gap-4 p-8 bg-white rounded-md shadow-md",encType:"multipart/form-data",onSubmit:t(e=>{if(!(null==N?void 0:N.length))return alert("장르를 선택해주세요!");let{coverImages:i,...t}=e,s={...t,bookId:Number(f.bid),genreIdList:N,coverImage:i&&i[0]};k.mutate(s)}),children:[(0,s.jsxs)("section",{className:"flex flex-row items-center justify-between w-full",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"작품수정"}),(0,s.jsx)("button",{type:"submit",disabled:c,className:"px-6 py-4 font-bold border shadow-md rounded-xl hover:text-main-contra hover:bg-main",children:"수정하기"})]}),(0,s.jsx)("fieldset",{className:"flex flex-col w-full gap-4 text-lg",children:(0,s.jsxs)("div",{className:"w-full flex flex-row justify-between items-center border border-gray-400 rounded-md shadow-md p-4 checked-bg:bg-main",children:[(0,s.jsx)("p",{className:"w-[15%] font-bold",children:"장르"}),(0,s.jsx)("ul",{className:"flex flex-row gap-2",children:null==j?void 0:j.map(e=>(0,s.jsxs)("li",{className:"flex flex-row items-center justify-center gap-2 px-2 py-1 text-white border bg-main rounded-xl",children:[(0,s.jsx)("p",{children:e}),(0,s.jsx)(m.R5A,{className:"text-white/30 hover:text-white",onClick:()=>{let i=j.filter(i=>i!==e);v(i)}})]},"genre-name-".concat(e)))}),(0,s.jsx)("input",{type:"hidden",className:"border",value:"".concat(N)}),(0,s.jsx)("input",{className:"px-2 py-1 border rounded-md",list:"genre_list",onKeyUp:e=>{e.preventDefault(),console.log("Key Inputted: ",e.key);let i=e.target;i.value=i.value.trim();let t=" "===e.key,s=null==S?void 0:S.map(e=>{let{kor:i}=e;return i}).includes(i.value);if(t&&s){let e=[...new Set([...j,i.value])];v(e),i.value=""}}}),(0,s.jsx)("datalist",{id:"genre_list",defaultValue:0,children:null==S?void 0:S.map(e=>(0,s.jsx)("option",{value:e.kor},"genreId-"+e.id))})]})}),(0,s.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[(0,s.jsxs)("div",{className:"w-full flex flex-row justify-center items-center border border-gray-400 rounded-md shadow-md p-4 gap-6",children:[(0,s.jsx)("p",{className:"w-[15%] font-bold",children:"작품명"}),(0,s.jsxs)("div",{className:"flex flex-col flex-1 gap-2",children:[(0,s.jsx)("input",{type:"text",defaultValue:null==Z?void 0:Z.title,className:"px-4 py-2 border border-gray-400 rounded-lg",placeholder:"20자 이하로 작성 가능합니다.",...i("title",{required:"제목을 입력해주세요.",minLength:{value:3,message:"3글자 이상 30글자 이하로 입력해주세요."},maxLength:{value:30,message:"3글자 이상 30글자 이하로 입력해주세요."}})}),A.title&&(0,s.jsx)("small",{role:"alert",children:A.title.message})]})]}),(0,s.jsxs)("fieldset",{className:"w-full h-fit flex flex-row justify-center items-center border border-gray-400 rounded-md shadow-md p-4 gap-6",children:[(0,s.jsxs)("div",{className:"w-[15%] flex flex-col justify-start items-start",children:[(0,s.jsx)("p",{className:"w-full font-bold",children:"작품소개"}),(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"(줄거리)"})]}),(0,s.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,s.jsx)("textarea",{defaultValue:null==Z?void 0:Z.description,className:"flex flex-1 w-full px-4 py-2 text-sm border border-gray-400 rounded-lg outline-none resize-none placeholder:text-base",rows:5,placeholder:"작품 줄거리를 입력하세요.",...i("description",{required:"작품소개를 입력해주세요.",minLength:{value:3,message:"3글자 이상 200글자 이하로 입력해주세요."},maxLength:{value:255,message:"3글자 이상 200글자 이하로 입력해주세요."}})}),A.description&&(0,s.jsx)("small",{role:"alert",children:null===(e=A.description.message)||void 0===e?void 0:e.toString()})]})]}),(0,s.jsxs)("fieldset",{className:"w-full flex flex-row justify-center items-center border border-gray-400 rounded-md shadow-md p-4 gap-6",children:[(0,s.jsxs)("div",{className:"w-[15%] flex flex-col gap-1",children:[(0,s.jsx)("p",{className:"font-bold",children:"표지이미지"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"(200 x 305px)"})]}),(0,s.jsxs)("section",{className:"flex flex-1 gap-4 p-2 text-sm",children:[(0,s.jsx)(a(),{width:200,height:305,src:(null==Z?void 0:Z.coverUrl)?Z.coverUrl:p.Z,className:"w-[100px] border rounded-md ".concat(b?"border-gray-300":""),alt:b?"미리보기 이미지(Image Preview)":"기본 조아라 표지이미지"}),(0,s.jsxs)("section",{className:"flex flex-col w-full gap-2 overflow-hidden",children:[(0,s.jsxs)("fieldset",{className:"flex flex-col w-full text-gray-400 whitespace-nowrap",children:[(0,s.jsx)("p",{className:"font-bold text-dark",children:"*주의사항"}),(0,s.jsx)("p",{children:l.J.dummy_short})]}),(0,s.jsx)("fieldset",{className:"flex flex-row justify-start w-full gap-2",children:(0,s.jsx)("input",{...i(I),id:"coverUrl",type:"file",accept:"image/*"})})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 flew-row",children:[(0,s.jsx)("button",{className:"px-6 py-4 font-bold text-black bg-white border shadow-md rounded-xl hover:text-main-contra hover:bg-main",onClick:e=>C(e),children:"삭제하기"}),(0,s.jsx)("button",{type:"submit",disabled:c,className:"px-6 py-4 font-bold border shadow-md rounded-xl hover:text-main-contra bg-main text-main-contra hover:bg-black",children:"수정하기"})]})]})]})},_=()=>{let[e,i]=(0,r.useState)(null),[t,l]=(0,r.useState)(),c=(0,r.useRef)(null),a=(0,r.useRef)(null),[n,m]=(0,r.useState)("");return(0,o.Z)(a.current,n),(0,r.useCallback)(e=>c.current&&l(c.current.value=""),[]),(0,s.jsx)("div",{className:"flex items-center justify-center w-full p-8",children:(0,s.jsx)(I,{})})};var k=_},8993:function(e,i,t){"use strict";var s=t(7294);let o=(e,i)=>{(0,s.useEffect)(()=>{if(e){e.style.height="0px";let i=e.scrollHeight;e.style.height=i+"px"}},[e,i])};i.Z=o}},function(e){e.O(0,[850,774,888,179],function(){return e(e.s=2514)}),_N_E=e.O()}]);