(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{2076:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/books/[bid]",function(){return s(5592)}])},350:function(e,t){"use strict";t.Z={src:"/react-joara-front/_next/static/media/not.f851db07.jpg",height:536,width:500,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgABwMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAAqwP/xAAaEAADAAMBAAAAAAAAAAAAAAABAgMAFCFR/9oACAEBAAE/AJyXcrVB1iVYjwdAz//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Af//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Af//Z",blurWidth:7,blurHeight:8}},9157:function(e,t){"use strict";t.Z={src:"/react-joara-front/_next/static/media/preview.ceb96345.jpg",height:465,width:300,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgABQMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAAArAK//8QAGxAAAgEFAAAAAAAAAAAAAAAAAQIAAyEjMUH/2gAIAQEAAT8AWo98ej0z/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPwB//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwB//9k=",blurWidth:5,blurHeight:8}},9691:function(e,t,s){"use strict";var l=s(7848),i=s(8742),r=s(609),A=s(6991);let{API_BOOK:a}=r.Z,n=async e=>{let{data:t}=await i._i.get("".concat(a,"/").concat(e));return t},c=e=>(0,l.a)({queryKey:[A.y_,e],queryFn:()=>n(e)});t.Z=c},5592:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return G}});var l=s(5893),i=s(7935),r=s(6991),A=s(8742),a=s(5945),n=s(8228);let c=async(e,t)=>{let{data:s}=await A._i.delete("books/".concat(e,"/episode/").concat(t));return s},o=()=>{let e=(0,a.NL)();return(0,n.D)(e=>{let{bid:t,eid:s}=e;return c(t,s)},{onError:e=>alert(e),onSuccess:()=>{e.invalidateQueries([r.kJ]),e.invalidateQueries([r.T6])}})};var u=s(1163);let d=e=>{let t=(0,u.useRouter)(),{hasToken:s,setHasToken:r,episodeList:A,episodeSize:a}=e,{BOOK:n,EPISODE:c}=i.Z,{bid:d,eid:x}=t.query,{mutate:h}=o(),m=()=>{d&&x&&h({bid:Number(d),eid:x},{onSuccess:()=>{alert("삭제 되었습니다."),t.push("".concat(n,"/").concat(d))},onError:e=>{alert(e)}})};return(0,l.jsxs)("section",{className:"flex flex-col flex-1 gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-end justify-start gap-2",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"작품회차"}),(0,l.jsxs)("span",{children:["(",a,")"]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-end gap-2 divide-x",children:[(0,l.jsx)("p",{className:"cursor-pointer hover:text-main",onClick:()=>{},children:"최신순"}),(0,l.jsx)("p",{className:"pl-2 cursor-pointer hover:text-main",onClick:()=>{},children:"첫화"})]})]}),(0,l.jsxs)("section",{className:"flex flex-col items-center justify-between gap-4 p-4 bg-white border rounded-xl",children:[(0,l.jsx)("ul",{className:"flex flex-col flex-1 w-full divide-y",children:null==A?void 0:A.map(e=>{var i,r;return(0,l.jsxs)("li",{className:"flex flex-col items-center justify-center gap-4 p-4 rounded-md hover:bg-gray-100",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center justify-between w-full gap-6 ",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 cursor-pointer hover:text-main",onClick:()=>{t.push({pathname:"".concat(n,"/").concat(e.bookId,"/").concat(c,"/").concat(e.epiNum)})},children:[(0,l.jsxs)("p",{className:"p-1 text-xs text-main rounded-xl",children:["EP.",e.epiNum]}),(0,l.jsx)("p",{className:"font-bold",children:e.epiTitle}),(0,l.jsx)("p",{children:e.status})]}),s&&(0,l.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,l.jsx)("button",{className:"px-4 py-2 rounded-md bg-primary text-main-contra hover:bg-primary-active",onClick:()=>{t.push({pathname:"/publish/".concat(e.bookId,"/episode/").concat(e.epiNum),query:{eid:e.id}})},children:"수정"}),(0,l.jsx)("button",{className:"px-4 py-2 rounded-md bg-danger text-main-contra hover:bg-danger-active",onClick:()=>{confirm("삭제 하시겠어요? ( 삭제하면 작품이 비활성화 됩니다. )")?m():alert("삭제 취소했습니다.")},children:"삭제"})]})]}),(0,l.jsxs)("div",{className:"flex flex-row items-center justify-between w-full gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-row justify-start gap-2",children:[(0,l.jsxs)("p",{children:["조회수:",null!==(i=e.viewCount)&&void 0!==i?i:0]}),(0,l.jsxs)("p",{children:["좋아요:",null!==(r=e.heartCount)&&void 0!==r?r:0]})]}),(0,l.jsx)("p",{className:"text-default-contra",children:e.createdAt})]})]},"episode-"+e.id)})}),a>1&&(0,l.jsx)("div",{className:"flex flex-row gap-4",children:[1,2,3,4,5].map(e=>(0,l.jsx)("button",{className:"flex items-center justify-center w-8 h-8 p-4 text-lg bg-white border rounded-md text-main hover:bg-main hover:text-main-contra",onClick:()=>{},children:e},"page-"+e))})]})]})};var x=s(5675),h=s.n(x),m=s(7294),f=s(8193),p=s(9157);let g={PENDING:"보류",ACTIVE:"연재",SUSPEND:"임시휴재",REMOVED:"삭제",BLOCK:"정지"};Object.freeze(g);var v=s(3750),j=s(609);let{API_FAVORITE_DELETE:b}=j.Z,w=async e=>{let{data:t}=await A.Vm.delete("".concat(b),{data:e});return t?alert("선호작 취소요청이 되었습니다."):alert("선호작 취소가 실패하였습니다."),t},N=()=>{let e=(0,a.NL)();return(0,n.D)(w,{onError:e=>alert(e),onSuccess:()=>{e.invalidateQueries([r.y_]),e.invalidateQueries([r.Hx])}})},{API_FAVORITE_CREATE:E}=j.Z,{BOOK_ME:C}=i.Z,y=e=>A.Vm.post(E,e).then(e=>{let{data:t}=e;t.success?alert("선호작이 등록 되었습니다."):alert("선호작을 취소 합니다.")}).catch(console.error),Q=()=>{let e=(0,a.NL)();return(0,n.D)(y,{onError:e=>alert(e),onSuccess:()=>{e.invalidateQueries([r.y_]),e.invalidateQueries([r.Hx])}})},B=e=>{var t,s,r,A,a;let n="px-6 py-2 font-bold transition rounded-md bg-main text-main-contra hover:scale-105",c="cursor-pointer hover:scale-110 text-3xl",{hasToken:o,setHasToken:d,book:x}=e,j=(0,u.useRouter)(),{BOOK_PUBLISH:b,BOOK_UPDATE_PUBLISH:w,EPISODE:E}=i.Z,[C,y]=(0,m.useState)(!0),B=Q(),I=N();return(0,l.jsxs)("section",{className:"flex flex-col ",children:[(0,l.jsxs)("div",{className:"flex flex-row items-start justify-between w-full gap-8 py-4",children:[(0,l.jsx)(h(),{width:150,height:200,className:"w-[25%]",src:(null==x?void 0:x.coverUrl)?null==x?void 0:x.coverUrl:p.Z,alt:(null==x?void 0:x.title)+"표지이미지"}),(0,l.jsx)("section",{className:"flex flex-col items-start flex-1",children:(0,l.jsxs)("div",{className:"flex flex-col items-start justify-between w-full min-h-full gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-row items-start justify-between w-full",children:[(0,l.jsxs)("div",{className:"flex flex-row justify-start w-full gap-2",children:[(0,l.jsx)("button",{className:"px-4 py-2 font-bold transition rounded-md bg-main text-main-contra hover:scale-105 text-sm",children:g[null!==(s=null==x?void 0:x.status)&&void 0!==s?s:"PENDING"]}),(0,l.jsx)("h1",{className:"text-3xl font-bold",children:null==x?void 0:x.title})]}),(0,l.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[C?(0,l.jsx)(v.flH,{className:"".concat(c," text-black/50"),onClick:()=>{if(!(null==x?void 0:x.id))return;let e={bookId:null==x?void 0:x.id};B.mutate(e),y(!C)}}):(0,l.jsx)(v.rlt,{className:"".concat(c),onClick:()=>{if(!(null==x?void 0:x.id))return;let e={bookId:null==x?void 0:x.id};I.mutate(e),y(!C)}}),(0,l.jsx)("p",{className:"text-lg text-black/50",children:(null!==(r=null==x?void 0:x.totalHeartCount)&&void 0!==r?r:-1)+(C?0:1)})]}),o&&(0,l.jsx)(f.zPD,{className:"text-4xl cursor-pointer hover:text-main",onClick:()=>{j.push({pathname:w,query:{bid:null==x?void 0:x.id}})}})]})]}),(0,l.jsxs)("div",{className:"flex flex-col w-full gap-2 text-icon",children:[(0,l.jsxs)("p",{className:"w-fit",children:["작가: ",null==x?void 0:x.nickname]}),(0,l.jsxs)("div",{className:"flex justify-start flex-1 gap-4",children:[(0,l.jsxs)("p",{children:["평점: ",null!==(A=null==x?void 0:x.score)&&void 0!==A?A:-1,"점"]}),(0,l.jsxs)("p",{children:["조회수: ",null!==(a=null==x?void 0:x.totalViewCount)&&void 0!==a?a:-1,"회"]})]})]}),(0,l.jsx)("p",{className:"flex flex-col items-start flex-1 w-full min-h-[150px]",children:null==x?void 0:x.description}),(0,l.jsx)("ul",{className:"flex flex-row items-center justify-start gap-2",children:null==x?void 0:null===(t=x.genreNameList)||void 0===t?void 0:t.map((e,t)=>(0,l.jsx)("li",{className:"px-4 py-1 text-sm border rounded-md hover:bg-main hover:text-main-contra",onClick:()=>{},children:(0,l.jsx)("p",{children:e})},"genreName-"+t))})]})})]}),(0,l.jsx)("div",{className:"flex items-end justify-end w-full gap-4",children:o?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("button",{className:n,onClick:()=>{j.push({pathname:"".concat(b,"/").concat(null==x?void 0:x.id,"/episode")})},children:"에피소드 추가"})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{className:n,children:"최근화보기"}),(0,l.jsx)("button",{className:n,children:"첫화보기"})]})})]})};var I={src:"/react-joara-front/_next/static/media/cat.9218cd45.jpeg",height:225,width:224,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABAEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAAAsAf/xAAcEAACAgIDAAAAAAAAAAAAAAABAgMEAAURFSP/2gAIAQEAAT8A7aejsrM6bJi0sgL+g4YDP//EABoRAAICAwAAAAAAAAAAAAAAAAIDARIAEbH/2gAIAQIBAT8AWgXpQZky0rHdTkeZ/8QAGREBAQADAQAAAAAAAAAAAAAAAQIAERIx/9oACAEDAQE/AKpi7ANdPoOf/9k=",blurWidth:8,blurHeight:8},k=s(8929);let R=e=>{let{asideTitle:t,recommendBooks:s}=e,r=(0,u.useRouter)(),{BOOK:A}=i.Z;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"text-2xl font-bold",children:t}),(0,l.jsx)("ul",{className:"flex flex-col w-full gap-6 p-4 bg-white border rounded-xl",children:null==s?void 0:s.map(e=>{var t;return(0,l.jsxs)("li",{className:"flex flex-row gap-2 p-2 cursor-pointer hover:bg-main/20",onClick:()=>{r.push({pathname:"".concat(A,"/").concat(e.id)})},children:[(0,l.jsx)(h(),{src:e.coverUrl?e.coverUrl:I,className:"w-[80px] h-[110px] ax-w-[80px] max-h-[110x]",width:80,height:10,alt:e.title+"이미지"}),(0,l.jsxs)("div",{className:"flex flex-col justify-between flex-1",children:[(0,l.jsx)("p",{className:"text-base font-bold",children:e.title}),(0,l.jsx)("ul",{className:"flex flex-wrap gap-1",children:null===(t=e.genreIdList)||void 0===t?void 0:t.map(e=>(0,l.jsx)("li",{className:"flex flex-wrap p-1 text-xs text-white rounded-md w-fit bg-main",children:k.Q8[e]},"recommend-"+e))})]})]},"recommend-".concat(e.id))})})]})};var M=s(7848);let{API_BOOK:D,API_EPISODE:S}=j.Z,P=async(e,t,s)=>{let{data:l}=await A._i.get("".concat(D,"/").concat(e).concat(S));return l},F=(e,t,s)=>(0,M.a)({queryKey:[r.kJ,e,t,s],queryFn:()=>P(e,t,s)});var U=s(4389),O=s(350),T=s(9691);let{API_BOOK:L,API_BOOK_RECOMMEND:Z}=j.Z,_=async e=>{let{data:t}=await A._i.get("".concat(L,"/").concat(e).concat(Z));return t},K=e=>(0,M.a)({queryKey:[r.RL,e],queryFn:()=>_(e)}),V=()=>{var e;let t=U.Z.get();(0,m.useEffect)(()=>{t?i(!0):i(!1)},[t]);let[s,i]=(0,m.useState)(!0),r=(0,u.useRouter)(),A=r.query,{data:{book:a}={}}=(0,T.Z)(Number(A.bid)),{data:{episodeList:n,lastPage:c}={}}=F(Number(A.bid),Number(k.$u.TEN),Number(1)),{data:{books:o}={}}=K(Number(A.bid));return(0,l.jsxs)("div",{className:"flex flex-col gap-8 px-16 py-8 divide-y",children:[(0,l.jsx)(B,{book:a,hasToken:s,setHasToken:i}),(0,l.jsxs)("div",{className:"flex flex-row justify-between gap-2 py-4",children:[n?(0,l.jsx)(d,{episodeList:n,episodeSize:null!==(e=null==a?void 0:a.episodeSize)&&void 0!==e?e:-1,hasToken:s,setHasToken:i}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-start w-full gap-2",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold",children:"등록된 회차가 없습니다."}),(0,l.jsx)(h(),{src:O.Z,alt:"회차가 없다는 이미지",width:500,height:200})]})}),(0,l.jsx)("aside",{className:"flex flex-col max-w-[340px] min-w-[340px] p-4 overflow-hidden gap-2",children:(0,l.jsx)(R,{asideTitle:"추천작",recommendBooks:o})})]})]})};var G=V},8228:function(e,t,s){"use strict";s.d(t,{D:function(){return d}});var l=s(7294),i=s(464),r=s(2161),A=s(9886),a=s(81),n=s(3989);class c extends n.l{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;let s=this.options;this.options=this.client.defaultMutationOptions(e),(0,r.VS)(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(t=this.currentMutation)||t.setOptions(this.options)}onUnsubscribe(){if(!this.listeners.length){var e;null==(e=this.currentMutation)||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();let t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let e=this.currentMutation?this.currentMutation.state:(0,A.R)(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){a.V.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var t,s,l,i,r,A,a,n;e.onSuccess?(null==(t=(s=this.mutateOptions).onSuccess)||t.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(l=(i=this.mutateOptions).onSettled)||l.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):e.onError&&(null==(r=(A=this.mutateOptions).onError)||r.call(A,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(a=(n=this.mutateOptions).onSettled)||a.call(n,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}e.listeners&&this.listeners.forEach(e=>{e(this.currentResult)})})}}var o=s(5945),u=s(4798);function d(e,t,s){let A=(0,r.lV)(e,t,s),n=(0,o.NL)({context:A.context}),[d]=l.useState(()=>new c(n,A));l.useEffect(()=>{d.setOptions(A)},[d,A]);let h=(0,i.$)(l.useCallback(e=>d.subscribe(a.V.batchCalls(e)),[d]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),m=l.useCallback((e,t)=>{d.mutate(e,t).catch(x)},[d]);if(h.error&&(0,u.L)(d.options.useErrorBoundary,[h.error]))throw h.error;return{...h,mutate:m,mutateAsync:h.mutate}}function x(){}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=2076)}),_N_E=e.O()}]);