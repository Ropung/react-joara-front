(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[492],{1606:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/publish",function(){return s(820)}])},6991:function(e,t,s){"use strict";s.d(t,{LT:function(){return l},vg:function(){return o}});let l="auth",o="book_add"},609:function(e,t){"use strict";let s={API_LOGIN:"/login",API_SIGNUP:"/signup",API_BOOKS_ADD:"/books/add"};Object.freeze(s),t.Z=s},6742:function(e,t,s){"use strict";s.d(t,{Ex:function(){return l},JA:function(){return o},ZN:function(){return r}});let l=[{url:"/logo/bookLogo.webp",alt:"이미지01",bannerId:1},{url:"/logo/bookLogo.webp",alt:"이미지02",bannerId:2},{url:"/logo/bookLogo.webp",alt:"이미지03",bannerId:3}],o={dummy_short:"Lorem ipsum dolor sit amet consectetur adipisicing elit",dummy_long:"Lorem ipsum dolor sit amet consectetur adipisicing elit Lorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elitLorem ipsum dolor sit amet consectetur adipisicing elit"},r=[{url:"http://image.yes24.com/goods/106211628/XL",alt:"이미지01",bookId:1,category:"",tag:""},{url:"http://image.yes24.com/goods/106211628/XL",alt:"이미지02",bookId:2,category:"",tag:""},{url:"http://image.yes24.com/goods/106211628/XL",alt:"이미지03",bookId:3,category:"",tag:""},{url:"http://image.yes24.com/goods/106211628/XL",alt:"이미지03",bookId:4,category:"",tag:""},{url:"http://image.yes24.com/goods/106211628/XL",alt:"이미지03",bookId:5,category:"",tag:""},{url:"http://image.yes24.com/goods/106211628/XL",alt:"이미지03",bookId:5,category:"",tag:""},{url:"http://image.yes24.com/goods/106211628/XL",alt:"이미지03",bookId:5,category:"",tag:""},{url:"http://image.yes24.com/goods/106211628/XL",alt:"이미지03",bookId:5,category:"",tag:""},{url:"http://image.yes24.com/goods/106211628/XL",alt:"이미지03",bookId:5,category:"",tag:""},{url:"http://image.yes24.com/goods/106211628/XL",alt:"이미지03",bookId:5,category:"",tag:""},{url:"http://image.yes24.com/goods/106211628/XL",alt:"이미지03",bookId:5,category:"",tag:""}]},1285:function(e,t,s){"use strict";s.d(t,{B:function(){return d}});var l=s(6154),o=s(4389);let r=o.Z.get(),a=l.Z.create({baseURL:"http://localhost:8080",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});t.Z=a;let d=l.Z.create({baseURL:"http://localhost:8080",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(r)}});d.interceptors.request.use(e=>({...e}))},820:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var l=s(5893),o=s(7294),r=s(6742),a=s(5675),d=s.n(a),i=s(7536),c=s(6991),n=s(609),m=s(7935),u=s(1285),x=s(5945),g=s(2673);let{API_BOOKS_ADD:f}=n.Z,{WRITER_ROOM:p}=m.Z,h=e=>u.B.post(f,e).then(e=>{let{data:t}=e;t.success?alert("성공"):alert("실패")}).catch(console.error),b=()=>{let e=(0,x.NL)();return(0,g.D)(h,{onError:e=>alert(e),onSuccess:()=>{e.invalidateQueries([c.vg])}})};var y=s(8929);let j=()=>{var e;let{ACTION:t,FANTASY:s,ROMANCE:a}=y.Z,{register:c,handleSubmit:n,watch:m,formState:{isSubmitting:u,errors:x}}=(0,i.cI)({mode:"onChange"}),g=b(),[f,p]=(0,o.useState)(""),h="coverImages",j=m(h);return(0,o.useEffect)(()=>{j&&j.length>0&&p(URL.createObjectURL(j[0]))},[j]),(0,l.jsxs)("form",{className:"w-full flex flex-col gap-4 bg-white rounded-md p-8 shadow-md",encType:"multipart/form-data",onSubmit:n(e=>{console.log(e);let{coverImages:t,...s}=e,l={...s,coverImage:t&&t[0]};g.mutate(l)}),children:[(0,l.jsxs)("section",{className:"w-full flex flex-row justify-between items-center",children:[(0,l.jsx)("h1",{className:"font-bold text-2xl",children:"작품등록"}),(0,l.jsx)("button",{type:"submit",disabled:u,className:"font-bold py-4 px-6 rounded-xl border shadow-md hover:text-main-contra hover:bg-main",children:"등록하기"})]}),(0,l.jsx)("fieldset",{className:"w-full flex flex-col gap-4 text-lg",children:(0,l.jsxs)("div",{className:"w-full flex flex-row justify-between items-center border border-gray-400 rounded-md shadow-md p-4 checked-bg:bg-main",children:[(0,l.jsx)("p",{className:"font-bold",children:"장르"}),(0,l.jsxs)("select",{className:"w-[20%] border border-gray-400 rounded-lg p-2 text-sm",...c("genreId",{required:"장르를 선택해주세요."}),children:[(0,l.jsx)("option",{value:t,children:"액션"}),(0,l.jsx)("option",{value:a,children:"로멘스"}),(0,l.jsx)("option",{value:s,children:"판타지"})]})]})}),(0,l.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,l.jsxs)("div",{className:"w-full flex flex-row justify-center items-center border border-gray-400 rounded-md shadow-md p-4 gap-6",children:[(0,l.jsx)("p",{className:"w-[15%] font-bold",children:"작품명"}),(0,l.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,l.jsx)("input",{type:"text",className:"border border-gray-400 rounded-lg py-2 px-4",placeholder:"20자 이하로 작성 가능합니다.",...c("title",{required:"제목을 입력해주세요.",minLength:{value:3,message:"3글자 이상 30글자 이하로 입력해주세요."},maxLength:{value:30,message:"3글자 이상 30글자 이하로 입력해주세요."}})}),x.title&&(0,l.jsx)("small",{role:"alert",children:x.title.message})]})]}),(0,l.jsxs)("fieldset",{className:"w-full h-fit flex flex-row justify-center items-center border border-gray-400 rounded-md shadow-md p-4 gap-6",children:[(0,l.jsxs)("div",{className:"w-[15%] flex flex-col justify-start items-start",children:[(0,l.jsx)("p",{className:"w-full font-bold",children:"작품소개"}),(0,l.jsx)("span",{className:"text-sm text-gray-400",children:"(줄거리)"})]}),(0,l.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,l.jsx)("textarea",{className:"w-full  flex flex-1 border border-gray-400 rounded-lg px-4 py-2 text-sm outline-none resize-none placeholder:text-base",rows:5,placeholder:"작품 줄거리를 입력하세요.",...c("description",{required:"작품소개를 입력해주세요.",minLength:{value:3,message:"3글자 이상 200글자 이하로 입력해주세요."},maxLength:{value:255,message:"3글자 이상 200글자 이하로 입력해주세요."}})}),x.description&&(0,l.jsx)("small",{role:"alert",children:null===(e=x.description.message)||void 0===e?void 0:e.toString()})]})]}),(0,l.jsxs)("fieldset",{className:"w-full flex flex-col items-center justify-center gap-4 p-4 border border-gray-400 rounded-md",children:[(0,l.jsxs)("div",{className:"w-full flex flex-row gap-2 items-center justify-start",children:[(0,l.jsx)("p",{className:"font-bold w-[15%]",children:"ISBN:"}),(0,l.jsx)("input",{className:"border border-gray-400 p-1 rounded-md flex flex-1",type:"text",placeholder:"ISBN 입력",...c("isbn")})]}),(0,l.jsxs)("div",{className:"w-full flex flex-row gap-2 items-center justify-start",children:[(0,l.jsx)("p",{className:"font-bold w-[15%]",children:"CIP:"}),(0,l.jsx)("input",{className:"border border-gray-400 p-1 rounded-md flex flex-1",type:"text",placeholder:"CIP 입력",...c("cip")})]})]}),(0,l.jsxs)("fieldset",{className:"w-full flex flex-row justify-center items-center border border-gray-400 rounded-md shadow-md p-4 gap-6",children:[(0,l.jsxs)("div",{className:"w-[15%] flex flex-col gap-1",children:[(0,l.jsx)("p",{className:"font-bold",children:"표지이미지"}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:"(200 x 305px)"})]}),(0,l.jsxs)("section",{className:"flex flex-1 gap-4 p-2 text-sm",children:[(0,l.jsx)(d(),{width:200,height:305,src:f||"http://image.yes24.com/goods/106211628/XL",className:"w-[100px] border rounded-md ".concat(f?"border-gray-300":""),alt:f?"미리보기 이미지(Image Preview)":"기본 조아라 표지이미지"}),(0,l.jsxs)("section",{className:"w-full flex flex-col gap-2 overflow-hidden",children:[(0,l.jsxs)("fieldset",{className:"w-full flex flex-col whitespace-nowrap text-gray-400",children:[(0,l.jsx)("p",{className:"font-bold text-dark",children:"*주의사항"}),(0,l.jsx)("p",{children:r.JA.dummy_short})]}),(0,l.jsx)("fieldset",{className:"w-full flex flex-row gap-2 justify-start",children:(0,l.jsx)("input",{...c(h),id:"coverUrl",type:"file",accept:"image/*"})})]})]})]}),(0,l.jsx)("button",{type:"submit",disabled:u,className:"font-bold py-4 px-6 rounded-xl border shadow-md hover:text-main-contra bg-main text-main-contra hover:bg-black",children:"작품 등록하기"})]})]})},w=()=>(0,l.jsx)("div",{className:"w-full flex items-center justify-center p-8",children:(0,l.jsx)(j,{})});var N=w}},function(e){e.O(0,[892,774,888,179],function(){return e(e.s=1606)}),_N_E=e.O()}]);